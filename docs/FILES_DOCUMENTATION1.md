diff --git a//dev/null b/FILES_DOCUMENTATION.md
index 0000000000000000000000000000000000000000..632d7f6ba885f206cb997ed901339e8f3249452b 100644
--- a//dev/null
+++ b/FILES_DOCUMENTATION.md
@@ -0,0 +1,475 @@
+# توثيق مسارات مشروع DoodleDuel
+
+يستعرض هذا المستند المجلدات والملفات المحددة من مسار المشروع، مع التركيز على دور كل عنصر، بنيته، وأبرز الملاحظات أو المخاطر المرتبطة به. تمت مراجعة المحتوى الفعلي في النسخة المتاحة داخل الحاوية (الموجودة تحت `/workspace/newhope`).
+
+### /home/user/doodleduel/apps
+
+- **الوظيفة/الدور:** يمثل حاوية تطبيقات المشروع الفرعية، حيث يجمع الواجهة الأمامية والخلفية ضمن هيكل أحادي المستودع لتسهيل إدارة الإصدارات وبناء الحزم.  
+- **التفاصيل التقنية/البنيوية:** يتضمن مجلدين أساسيين هما `backend` للخدمات المعتمدة على Express/Firebase Functions و`frontend` لتطبيق React، ما يسمح ببناء مستقل لكل تطبيق مع مشاركة إعدادات مشتركة عبر المسارات المطلقة.  
+- **الملاحظات/المخاطر/التحقق:** يجب التأكد من مزامنة تبعيات التطبيقين عبر الجذر لأن المسار المطلق في التعليمات يشير إلى `/home/user` بينما النسخة الحالية تقع تحت `/workspace/newhope`، ما قد يسبب التباسًا عند أتمتة النشر.
+
+### /home/user/doodleduel/apps/backend
+
+- **الوظيفة/الدور:** يحتوي التطبيق الخلفي القائم على Express والمصمم ليُنشر كدالة HTTPS على Firebase، ما يوفر نقطة الدخول لواجهات REST وخدمات مساندة مثل الإشعارات.  
+- **التفاصيل التقنية/البنيوية:** يضم مجلد `src` مع ملفات TypeScript لإعداد الخادم، إضافة إلى الاعتماد على مكتبات مثل `firebase-functions` و`firebase-admin` مع إمكانية البناء باستخدام esbuild وفق سكريبتات الجذر.  
+- **الملاحظات/المخاطر/التحقق:** يلزم مراقبة التوافق بين بيئة التطوير (تشغيل محلي مع Vite) وبيئة الاستضافة بدون سيرفر، مع التأكد من أن المسارات النسبية تظل صحيحة بعد النقل خارج `/workspace`.
+
+### /home/user/doodleduel/apps/backend/src
+
+- **الوظيفة/الدور:** يضم المصدر الأساسي لمنطق الخادم الخلفي بما في ذلك التسجيل للمسارات والتعامل مع Vite أثناء التطوير والربط مع Firebase.  
+- **التفاصيل التقنية/البنيوية:** يشمل ملفات مثل `index.ts` لنقطة الدخول، ووحدات مساندة للإشعارات والتخزين وتهيئة Vite، وكلها مكتوبة بـ TypeScript وتستخدم استيراد النماذج المشتركة من الحزمة `@shared`.  
+- **الملاحظات/المخاطر/التحقق:** ينبغي إجراء فحص TypeScript منتظم لأن بعض الملفات (مثل التخزين) تحتوي أخطاء تركيبية قد تمنع الترجمة، كما أن الاعتماد على DOM في وحدات مشتركة قد لا يعمل في بيئة Node.
+
+### /home/user/doodleduel/apps/backend/src/index.ts
+
+- **الوظيفة/الدور:** يعمل كنقطة تشغيل رئيسية للتطبيق الخلفي، حيث ينشئ تطبيق Express، يربط المسارات، ويصدّر التطبيق كدالة `functions.https.onRequest`.  
+- **التفاصيل التقنية/البنيوية:** يهيئ Firebase Admin، يستخدم `registerRoutes` لإرفاق الـ Router، ويستدعي `setupVite` مع خادم HTTP أثناء التطوير، مع قراءة المعاملات عبر `minimist` لتحديد المنفذ.  
+- **الملاحظات/المخاطر/التحقق:** تتطلب معالجة الأخطاء الحالية تحسينًا لأن إعادة رمي الاستثناء داخل الوسيط قد يوقف الخادم المحلي، كما أن تشغيل Vite داخل دالة Firebase غير مفعّل في الإنتاج ما يستلزم التأكد من وجود نسخة مبنية جاهزة.
+
+### /home/user/doodleduel/apps/backend/src/notifications.ts
+
+- **الوظيفة/الدور:** يوفر مسار REST لتسجيل رموز إشعارات Firebase Cloud Messaging، ما يمكّن الخادم من الاحتفاظ بعناوين الأجهزة لإرسال التنبيهات.  
+- **التفاصيل التقنية/البنيوية:** ينشئ Router من Express يستقبل طلب `POST /register`، ويتوقع جسدًا يحوي `token` ويطبع القيمة حاليًا كإثبات وصول، مع استيراد `firebase-admin` للتحضير للتكامل المستقبلي.  
+- **الملاحظات/المخاطر/التحقق:** يحتوي على خطأ مطبعي في عبارة `catch (error) M` سيمنع التجميع وتشغيل المسار، كما أنه لا يخزن الرمز في قاعدة بيانات فعلية ما يحد من فائدته حتى يُستكمل التنفيذ.
+
+### /home/user/doodleduel/apps/backend/src/remoteConfig.ts
+
+- **الوظيفة/الدور:** يستجيب لتحديثات Firebase Remote Config لمراقبة التغييرات على القوالب وإظهار الفروقات في السجلات لأغراض المراقبة والتحقق.  
+- **التفاصيل التقنية/البنيوية:** يستخدم مشغل `functions.remoteConfig.onUpdate` لجلب القالب الحالي والنسخة السابقة عبر `firebase-admin`، ثم يقارنها باستخدام مكتبة `json-diff` ويطبع النتائج مع معرف المشروع.  
+- **الملاحظات/المخاطر/التحقق:** يعتمد على وجود صلاحيات لواجهة Remote Config وعلى توفر النسخة السابقة؛ ينبغي التعامل مع الحالات التي يكون فيها `versionNumber` 1 لتجنب طلب نسخة غير موجودة، كما أن الكائن `diff` قد ينتج مخرجات طويلة يجب مراقبتها.
+
+### /home/user/doodleduel/apps/backend/src/routes.ts
+
+- **الوظيفة/الدور:** يجمع ويهيكل جميع المسارات الفرعية للتطبيق، ويعيد خادم HTTP المستخدم لاحقًا في تكامل Vite أو في النشر.  
+- **التفاصيل التقنية/البنيوية:** يستورد التخزين المؤقت و`notificationsRouter`، ويضيفه تحت البادئة `/api/notifications`، ثم ينشئ خادمًا عبر `createServer(app)` لإرجاعه إلى نقطة الدخول.  
+- **الملاحظات/المخاطر/التحقق:** يفتقر لتعريف مسارات إضافية أو تحقق من صحة الطلبات، كما أن التعليقات تشير إلى واجهات CRUD غير منفذة بعد، لذا يتعين التخطيط لتوسعتها وربطها بالتخزين الفعلي.
+
+### /home/user/doodleduel/apps/backend/src/storage.ts
+
+- **الوظيفة/الدور:** يوفر طبقة تخزين أولية للمستخدمين باستخدام ذاكرة مؤقتة، ويعرّف الواجهات التي يجب أن تدعمها أي طبقة تخزين مستقبلية.  
+- **التفاصيل التقنية/البنيوية:** يعرّف الواجهة `IStorage` بثلاث عمليات (جلب بالمعرف، جلب بالاسم، إنشاء)، وينفذها الصنف `MemStorage` باستخدام `Map` داخلي وتوليد UUID عبر `randomUUID`.  
+- **الملاحظات/المخاطر/التحقق:** يحتوي على خطأ جسيم في تكوين الكائن الجديد (`{ ...insert-user, id }`) ما يسبب فشل TypeScript، كما أن التخزين في الذاكرة لا يدوم ويجب استبداله عند ربط قاعدة بيانات حقيقية.
+
+### /home/user/doodleduel/apps/backend/src/vite.ts
+
+- **الوظيفة/الدور:** يهيئ تكامل Vite مع Express لتجربة تطوير متكاملة، ويوفر كذلك خدمة الملفات الساكنة للنسخ المبنية.  
+- **التفاصيل التقنية/البنيوية:** يستدعي `createViteServer` مع تفعيل `middlewareMode`، يضيف وسيطًا لإعادة تحميل `index.html` وإلحاق بارامتر عشوائي بـ `main.tsx`، ويوفر دالة `serveStatic` للتحقق من وجود مجلد `dist/public`.  
+- **الملاحظات/المخاطر/التحقق:** يجب الحذر من استدعاء `process.exit` داخل المخصص `error` لأنه سيوقف الخادم عند أي خطأ، كما أن الوصول إلى `import.meta.dirname` يتطلب دعم ES modules في Node 20 كما هو محدد في البيئة.
+
+### /home/user/doodleduel/apps/frontend
+
+- **الوظيفة/الدور:** يمثل تطبيق الواجهة الأمامية المبني بـ React وVite لتوفير محرر السيناريو وتكامل Firebase للمراسلة.  
+- **التفاصيل التقنية/البنيوية:** يحتوي على ملف `index.html`, مجلد `public` لخدمات الويب مثل عامل Firebase، ومجلد `src` الذي يضم الشيفرة المصدرية وملفات الأنماط.  
+- **الملاحظات/المخاطر/التحقق:** يجب التأكد من توافق إعدادات Vite في مجلد `configs` مع هذا المسار لأن المشروع الفعلي مخزن تحت `/workspace/newhope` وليس تحت `/home/user` كما في التعليمات النظرية.
+
+### /home/user/doodleduel/apps/frontend/public
+
+- **الوظيفة/الدور:** يوفر الأصول الثابتة التي تُخدم مباشرة دون تجميع، بما في ذلك ملف عامل خدمة إشعارات Firebase.  
+- **التفاصيل التقنية/البنيوية:** يحتوي حاليًا على `firebase-messaging-sw.js` فقط، ويُربط في إعداد Vite كدليل عام عند البناء.  
+- **الملاحظات/المخاطر/التحقق:** يجب حفظ أي أصول مستقبلية هنا مع الانتباه إلى أن Firebase Hosting يتوقع ملفات مبنية في `dist/public` بعد عملية البناء.
+
+### /home/user/doodleduel/apps/frontend/public/firebase-messaging-sw.js
+
+- **الوظيفة/الدور:** يحدد عامل خدمة Firebase Cloud Messaging اللازم لتلقي الإشعارات في الواجهة الأمامية أثناء عمل التطبيق في المتصفح.  
+- **التفاصيل التقنية/البنيوية:** يستخدم إصدارات `9.0.0` من مكتبات Firebase التوافقية، يهيئ التطبيق عبر كائن إعدادات ثابتة، ويستدعي `firebase.messaging()` للحصول على الكائن المسؤول عن تلقي الرسائل.  
+- **الملاحظات/المخاطر/التحقق:** يحتوي على قيم افتراضية (YOUR_API_KEY وغيرها) يجب استبدالها بمفاتيح حقيقية، كما أن استخدام إصدارات compat قد لا يدعم أحدث ميزات SDK V9 المعيارية.
+
+### /home/user/doodleduel/apps/frontend/src
+
+- **الوظيفة/الدور:** هو المصدر الرئيسي لتطبيق React، ويضم المكونات والصفحات والأنماط بالإضافة إلى ملفات التهيئة الخاصة بالمكتبات.  
+- **التفاصيل التقنية/البنيوية:** يحتوي على `App.tsx` كنقطة تركيب للتوجيه، مجلد `features` لوحدات النطاق مثل محرر السيناريو، مجلدات `hooks`, `lib`, `pages`, و`styles` لتنظيم الوظائف المشتركة.  
+- **الملاحظات/المخاطر/التحقق:** يجب الحفاظ على اتساق المسارات المستعارة (`@/...`) مع إعدادات `tsconfig`، كما أن مجلد `shared` المشار إليه في المتطلبات غير موجود حاليًا ويستلزم مراجعة.
+
+### /home/user/doodleduel/apps/frontend/src/features
+
+- **الوظيفة/الدور:** يجمع المزايا المتقدمة للتطبيق الأمامي، مما يسهل فصل نطاق السيناريو عن أي نطاقات مستقبلية.  
+- **التفاصيل التقنية/البنيوية:** يضم مجلدًا واحدًا باسم `screenplay` يحتوي المكونات والصفحات الخاصة بمحرر السيناريو، مع إمكانية إضافة مجلدات لميزات أخرى لاحقًا.  
+- **الملاحظات/المخاطر/التحقق:** يجب مراقبة نمو حجم محرر السيناريو داخل هذا المجلد لتجنب تشعب شيفرة صعبة الإدارة، وربما تقسيمه إلى حزم أصغر مستقبلًا.
+
+### /home/user/doodleduel/apps/frontend/src/features/screenplay
+
+- **الوظيفة/الدور:** يمثل الميزة الأساسية للمشروع، أي محرر ومعالج السيناريو الموجه للغة العربية.  
+- **التفاصيل التقنية/البنيوية:** يحتوي على مجلد `components` لمختلف أشرطة الأدوات ومحرر الشاشة، ومجلد `pages` لتجميع الصفحة الرئيسية التي تستضيف المحرر.  
+- **الملاحظات/المخاطر/التحقق:** لا يوجد مجلد `utils` فعلي رغم ذكره في المتطلبات، ما يشير إلى أن بعض الوظائف المساعدة لم تُنشأ أو حُذفت ويجب تحديث الاستيرادات.
+
+### /home/user/doodleduel/apps/frontend/src/features/screenplay/components
+
+- **الوظيفة/الدور:** يضم المكونات البصرية والوظيفية التي تشكل واجهة المحرر، من أشرطة الأدوات إلى مربع الحوار.  
+- **التفاصيل التقنية/البنيوية:** يحتوي على ملفات TypeScript/React متعددة (ClipboardToolbar، EditingToolbar، وغيرها) تستخدم مكونات واجهة من مكتبة shadcn/ui وأيقونات `lucide-react`.  
+- **الملاحظات/المخاطر/التحقق:** يتوجب التأكد من توافق هذه المكونات مع منطق المحرر الأساسي (`ScreenplayEditor`) خاصة أن بعضها يعتمد على أوامر DOM قديمة (`document.execCommand`).
+
+### /home/user/doodleduel/apps/frontend/src/features/screenplay/components/ClipboardToolbar.tsx
+
+- **الوظيفة/الدور:** يوفر شريط أدوات القص والنسخ واللصق مع زر لتفعيل أداة نسخ التنسيق ضمن المحرر.  
+- **التفاصيل التقنية/البنيوية:** يعرّف مكونًا داليًا يتلقى حالة أداة النسخ ويتفاعل مع أوامر المتصفح (`document.execCommand`) مع تغليف الأدوات باستخدام `TooltipProvider`.  
+- **الملاحظات/المخاطر/التحقق:** يعتمد على واجهة DOM القديمة التي قد تُحظر في بعض المتصفحات الحديثة، كما أن المكون لا يدير حالة نجاح/فشل الأوامر ما قد يسبب تجربة مستخدم غامضة.
+
+### /home/user/doodleduel/apps/frontend/src/features/screenplay/components/EditingToolbar.tsx
+
+- **الوظيفة/الدور:** يضيف وظائف البحث والاستبدال داخل المحرر عبر واجهة حوارية.  
+- **التفاصيل التقنية/البنيوية:** يستخدم حالة محلية لفتح `FindReplaceDialog`، ويعتمد على `window.find`، وتعديلات مباشرة على DOM للأوامر بما في ذلك استبدال كل النتائج.  
+- **الملاحظات/المخاطر/التحقق:** استخدام `window.find` غير مدعوم في جميع المتصفحات وقد يسبب نتائج غير متوقعة، كما أن التلاعب بـ `innerHTML` في `handleReplaceAll` يعيد إدخال المحتوى بدون تنقيح، ما قد يؤثر على التنسيق أو الأمن.
+
+### /home/user/doodleduel/apps/frontend/src/features/screenplay/components/FindReplaceDialog.tsx
+
+- **الوظيفة/الدور:** يوفر واجهة مستخدم لنوافذ البحث والاستبدال، مما يسمح للمستخدم بإدارة النص داخل المحرر.  
+- **التفاصيل التقنية/البنيوية:** يعتمد على مكونات `Dialog` و`Input` و`Button` من shadcn/ui، ويستخدم حالات React محلية لتخزين كلمات البحث والاستبدال مع استدعاء دوال يتم تمريرها من الشريط.  
+- **الملاحظات/المخاطر/التحقق:** لا يشمل التحقق من حساسية حالة الأحرف أو اختيارات النص المركبة، لذا يجب التوسع لاحقًا لدعم خيارات أكثر (مثل مطابقة الكلمات الكاملة).
+
+### /home/user/doodleduel/apps/frontend/src/features/screenplay/components/FontToolbar.tsx
+
+- **الوظيفة/الدور:** يتيح للمستخدم تغيير خصائص الخط مثل العائلة والحجم وإضافة تنسيق غامق أو مائل أو ألوان للنصوص داخل المحرر.  
+- **التفاصيل التقنية/البنيوية:** يتضمن قوائم اختيار للخط والحجم، وأزرارًا تستدعي `document.execCommand` لأوامر التنسيق، مع مدخلات لون مخفية لتحفيز أوامر `foreColor` و`hiliteColor`.  
+- **الملاحظات/المخاطر/التحقق:** يجب ضمان توافق أوامر `execCommand` مع جميع المتصفحات ودعم الوصولية للمدخلات المخفية، كما أن عدم ربط القوائم بالحالة قد يعيق تزامن التغييرات مع المحتوى.
+
+### /home/user/doodleduel/apps/frontend/src/features/screenplay/components/ParagraphToolbar.tsx
+
+- **الوظيفة/الدور:** يوفر أدوات التحكم في تنسيق الفقرات مثل المحاذاة، القوائم، المسافة البادئة، وإظهار علامات التنسيق.  
+- **التفاصيل التقنية/البنيوية:** يعرّف أزرارًا تستدعي أوامر `justify` و`insertOrderedList` وغيرها، مع زر مخصص لتبديل عرض علامات التنسيق عبر استدعاء دالة يتم تمريرها من المكون الأب.  
+- **الملاحظات/المخاطر/التحقق:** يشترك في الاعتماد على أوامر DOM القديمة، كما أن وظيفة إظهار علامات التنسيق تعتمد على تنفيذ خارجي غير موضح في المكون، ما يستلزم تنسيقًا وثيقًا مع `ScreenplayEditor`.
+
+### /home/user/doodleduel/apps/frontend/src/features/screenplay/components/ScreenplayEditor.tsx
+
+- **الوظيفة/الدور:** يعد القلب التشغيلي للمحرر، مسؤولًا عن التنسيق، حساب الصفحات، التفاعل مع `ScreenplayCoordinator`، وإدارة الوضع الليلي.  
+- **التفاصيل التقنية/البنيوية:** يستخدم React hooks متعددة (`useMemo`, `useCallback`, `useEffect`) للتعامل مع التحليل بواسطة `ScreenplayCoordinator`، يضيف مراقب DOM لإعادة تخطيط الصفحات، ويحقن CSS ديناميكيًا لتحديد هوامش A4 وحاكم القياس.  
+- **الملاحظات/المخاطر/التحقق:** يعتمد على `window`, `MutationObserver`, وDOM APIs، ما يجعله غير متوافق مع SSR، كما أن التلاعب المباشر بـ `innerHTML` يتطلب sanitization لتفادي إدخال HTML ضار.
+
+### /home/user/doodleduel/apps/frontend/src/features/screenplay/components/StylesDialog.tsx
+
+- **الوظيفة/الدور:** يمكّن المستخدم من إنشاء أنماط مخصصة انطلاقًا من التحديد الحالي وحذف الأنماط المسجلة، ما يوسع إمكانات التنسيق.  
+- **التفاصيل التقنية/البنيوية:** يعتمد على `customStylesManager` المشترك لتخزين الأنماط في `localStorage`، ويعرض قائمة الأنماط الحالية مع زر حذف، ويستخدم حالات React للتحكم في اسم النمط الجديد.  
+- **الملاحظات/المخاطر/التحقق:** مسار الاستيراد `@shared/CustomStylesManager` لا يتوافق مع الحالة الحقيقية (`@shared/screenplay/customStylesManager`)، لذا سيؤدي إلى خطأ تجميع يجب تصحيحه قبل البناء.
+
+### /home/user/doodleduel/apps/frontend/src/features/screenplay/components/StylesToolbar.tsx
+
+- **الوظيفة/الدور:** يقدّم واجهة لاختيار الأنماط المعرّفة مسبقًا أو الأنماط المخصصة وتطبيقها على النص المحدد داخل المحرر.  
+- **التفاصيل التقنية/البنيوية:** يضم قائمة اختيار تعرض عناصر HTML قياسية بالإضافة إلى الأنماط المخصصة، ويستدعي `customStylesManager` لتطبيق الأنماط أو استخدام `document.execCommand('formatBlock')` عند عدم العثور على نمط.  
+- **الملاحظات/المخاطر/التحقق:** يعاني من نفس مشكلة مسار الاستيراد الخاطئ للمُدير، كما أن الاعتماد على أسماء الأنماط كوسوم HTML عند عدم التطابق قد ينتج عناصر غير متوقعة في DOM.
+
+### /home/user/doodleduel/apps/frontend/src/features/screenplay/pages
+
+- **الوظيفة/الدور:** يحتوي على الصفحات النهائية التي تُربط في نظام التوجيه وتعرض مكونات السيناريو للمستخدم النهائي.  
+- **التفاصيل التقنية/البنيوية:** يتضمن حاليًا ملفًا واحدًا `screenplay-processor.tsx` يستورد المحرر من مجلد المكونات ويعيده مباشرة.  
+- **الملاحظات/المخاطر/التحقق:** يجب التأكد من إضافة صفحات إضافية هنا عند توسيع التطبيق، كما أن الملف الحالي بلا سطر جديد نهائي ما قد يثير تحذيرات linting.
+
+### /home/user/doodleduel/apps/frontend/src/features/screenplay/pages/screenplay-processor.tsx
+
+- **الوظيفة/الدور:** يمثل صفحة واجهة المستخدم الرئيسية التي تستضيف مكون `ScreenplayEditor` وتعرضه للمستخدمين.  
+- **التفاصيل التقنية/البنيوية:** عبارة عن دالة React بسيطة تعيد JSX يتكون فقط من `<ScreenplayEditor />` مع استيراد باستخدام مسار علياس `@/`.  
+- **الملاحظات/المخاطر/التحقق:** ينقصه سطر نهائي ويخلو من معالجة أخطاء، لذا أي فشل داخل المحرر سينعكس مباشرة دون طبقة حماية أو حدود أخطاء.
+
+### /home/user/doodleduel/apps/frontend/src/features/screenplay/utils
+
+- **الوظيفة/الدور:** المسار المشار إليه يفترض أنه يحتوي أدوات مساعدة لدعم ميزة السيناريو مثل دوال التنسيق أو التحليل.  
+- **التفاصيل التقنية/البنيوية:** عند الفحص داخل النسخة المتاحة لم يتم العثور على مجلد أو ملفات تحت هذا المسار، ما يعني أن الوظائف المساعدة غير موجودة حاليًا.  
+- **الملاحظات/المخاطر/التحقق:** يجب تحديث التعليمات أو إنشاء هذا المجلد لتجنب أخطاء استيراد مستقبلية، وقد تحتاج الشيفرة الحالية إلى تنظيف من استيرادات تشير إليه.
+
+### /home/user/doodleduel/apps/frontend/src/hooks
+
+- **الوظيفة/الدور:** يضم الخطاطيف المخصصة المستخدمة عبر الواجهة الأمامية لإعادة استخدام منطق التفاعل مثل اكتشاف الأجهزة المحمولة وإدارة الإشعارات المنبثقة.  
+- **التفاصيل التقنية/البنيوية:** يحتوي على ملفين `use-mobile.tsx` و`use-toast.ts`، وكلاهما يعتمد على React hooks ويستفيد من المسارات المختصرة لمكونات الواجهة.  
+- **الملاحظات/المخاطر/التحقق:** يجب التأكد من أن هذه الخطاطيف لا تعتمد على كائنات DOM عند استخدامها في بيئات غير متصفح، حيث أن `use-mobile` يفترض وجود `window` دومًا.
+
+### /home/user/doodleduel/apps/frontend/src/hooks/use-mobile.tsx
+
+- **الوظيفة/الدور:** يحدد خطافًا لمراقبة حجم الشاشة والإبلاغ عما إذا كان العرض يعتبر جهازًا محمولًا وفق حد 768 بكسل.  
+- **التفاصيل التقنية/البنيوية:** يستخدم `window.matchMedia` مع حدث `change` ويعيد قيمة منطقية، مع تهيئة الحالة إلى غير محدد ثم تعيينها عند التركيب.  
+- **الملاحظات/المخاطر/التحقق:** الاعتماد على `window` يجعل الخطاف غير قابل للتشغيل في SSR، كما ينبغي تنظيف السمع في المتصفحات القديمة التي قد لا تدعم `addEventListener` على `MediaQueryList`.
+
+### /home/user/doodleduel/apps/frontend/src/hooks/use-toast.ts
+
+- **الوظيفة/الدور:** ينفذ نظام إشعارات منبثقة مخصص يعتمد على حالة مشتركة ويتيح إضافة التوست، تحديثه، أو إزالته.  
+- **التفاصيل التقنية/البنيوية:** يعرف نوع `ToasterToast`, حالات المخفض، خريطة للمهلات لإزالة الرسائل بعد تأخير طويل، ويعرض دوال `toast` و`useToast` لاستخدامها عبر التطبيق.  
+- **الملاحظات/المخاطر/التحقق:** إعدادات `TOAST_LIMIT` و`TOAST_REMOVE_DELAY` (مليون ميلي ثانية) قد تؤدي لتكدس الرسائل في الذاكرة؛ يستحسن ضبطها أو تنظيف القوائم عند التنقل بين الصفحات.
+
+### /home/user/doodleduel/apps/frontend/src/lib
+
+- **الوظيفة/الدور:** يجمع الوحدات المشتركة للواجهة مثل إعداد Firebase، عميل React Query، ودوال المساعدة لتنسيق الأصناف.  
+- **التفاصيل التقنية/البنيوية:** يشمل ملفات `firebase.ts`, `queryClient.ts`, و`utils.ts`، وكلها مكتوبة بـ TypeScript مع استخدام `import.meta.env` لقراءة المتغيرات البيئية و`fetch` لإجراء الطلبات.  
+- **الملاحظات/المخاطر/التحقق:** يجب توفير المتغيرات البيئية اللازمة عند البناء، والتأكد من أن `fetch` يستخدم مسارات صحيحة عند الدمج مع وظائف Firebase التي تعمل ضمن نفس الأصل.
+
+### /home/user/doodleduel/apps/frontend/src/lib/firebase.ts
+
+- **الوظيفة/الدور:** يهيئ تطبيق Firebase في الواجهة الأمامية ويعرّف دوالًا لطلب رمز FCM والاستماع للرسائل الواردة.  
+- **التفاصيل التقنية/البنيوية:** يستخدم SDK الإصدار 9 المعياري (`firebase/app`, `firebase/messaging`)، ويستدعي `getToken` مع مفتاح VAPID من المتغيرات البيئية، ويعيد وعدًا يلتقط الرسائل عبر `onMessage`.  
+- **الملاحظات/المخاطر/التحقق:** يتطلب إعداد قيم VITE المناسبة وإذن الإشعارات من المستخدم، ويجب التعامل مع حالات رفض الإذن وإرسال الرموز إلى الخادم بدلًا من مجرد الطباعة في السجل.
+
+### /home/user/doodleduel/apps/frontend/src/lib/queryClient.ts
+
+- **الوظيفة/الدور:** يوفر تهيئة مركزية لـ Query Client من `@tanstack/react-query` ويعرّف دوال المساعدة لإجراء الطلبات مع معالجة الاستجابات.  
+- **التفاصيل التقنية/البنيوية:** يتضمن دالة `apiRequest` لعمليات POST/PUT وغيرها، ووظيفة `getQueryFn` المهيأة لسلوك 401، ويضبط خيارات العميل لتعطيل إعادة المحاولة والاعتماد على التخزين المؤقت.  
+- **الملاحظات/المخاطر/التحقق:** لا يدير تحديث رمز CSRF أو التعامل مع إعادة التوثيق، كما أن ربط `queryKey.join('/')` يفترض مفاتيح نصية وقد يفشل عند استخدام مفاتيح مركبة.
+
+### /home/user/doodleduel/apps/frontend/src/lib/utils.ts
+
+- **الوظيفة/الدور:** يحتوي على دالة `cn` لتجميع أسماء الأصناف CSS باستخدام `clsx` ودمجها عبر `tailwind-merge`.  
+- **التفاصيل التقنية/البنيوية:** يستورد `clsx` ونوع `ClassValue` و`twMerge`، ويعيد دمجًا يضمن عدم تكرار أصناف Tailwind المتعارضة.  
+- **الملاحظات/المخاطر/التحقق:** يجب استخدام هذه الدالة في كل المكونات لضمان اتساق الأنماط، مع مراعاة أنها تفترض بيئة ES Modules نظرًا لاستخدام صيغة الاستيراد الحالية.
+
+### /home/user/doodleduel/apps/frontend/src/pages
+
+- **الوظيفة/الدور:** يوفر صفحات المستوى الأعلى غير المرتبطة بميزة محددة، مثل صفحة الخطأ 404.  
+- **التفاصيل التقنية/البنيوية:** يحتوي على `not-found.tsx` الذي يستخدم مكونات البطاقة من shadcn/ui وأيقونة `AlertCircle` لإظهار رسالة الخطأ.  
+- **الملاحظات/المخاطر/التحقق:** يجب إضافة أي صفحات عامة إضافية هنا وربطها في الموجه في `App.tsx`، مع اختبار حالة التنقل إلى مسارات غير معرّفة.
+
+### /home/user/doodleduel/apps/frontend/src/pages/not-found.tsx
+
+- **الوظيفة/الدور:** يعرض صفحة 404 عند الوصول إلى مسار غير معروف، موجّهًا المطور للتأكد من إضافة الصفحة المطلوبة إلى نظام التوجيه.  
+- **التفاصيل التقنية/البنيوية:** يبني واجهة باستخدام `Card` و`CardContent` و`AlertCircle`، ويستخدم تصنيفات Tailwind لتنسيق العنصر في وسط الشاشة بخلفية فاتحة.  
+- **الملاحظات/المخاطر/التحقق:** يمكن تحسين الصفحة بإضافة زر للعودة إلى الصفحة الرئيسية، كما ينبغي ترجمة النص بالكامل للعربية لضمان اتساق تجربة المستخدم.
+
+### /home/user/doodleduel/apps/frontend/src/shared
+
+- **الوظيفة/الدور:** المسار المذكور يفترض وجود موارد مشتركة (مثل الثوابت أو المكونات العامة) تخص الواجهة الأمامية.  
+- **التفاصيل التقنية/البنيوية:** لم يتم العثور على مجلد بهذا الاسم داخل المصدر الحالي؛ يبدو أنه لم يُنشأ أو تم حذفه مع بقاء الإشارة إليه في المتطلبات.  
+- **الملاحظات/المخاطر/التحقق:** يجب تحديث الخطة الهندسية أو إعادة إنشاء المجلد لضمان عدم تعطل الاستيرادات عند محاولة استخدامه.
+
+### /home/user/doodleduel/apps/frontend/src/styles
+
+- **الوظيفة/الدور:** يحوي ملفات الأنماط العامة للتطبيق الأمامي، بما في ذلك قواعد Tailwind وتخصيص متغيرات CSS.  
+- **التفاصيل التقنية/البنيوية:** يتضمن `index.css` الذي يفعّل توجيهات `@tailwind` ويعرف متغيرات ألوان وخطوط للتصميم الافتراضي والوضع الداكن.  
+- **الملاحظات/المخاطر/التحقق:** يجب التأكد من استيراد هذا الملف مرة واحدة (يتم عبر `main.tsx`)، وتحديث المتغيرات بعناية لأن العديد من قيم Tailwind تعتمد عليها.
+
+### /home/user/doodleduel/apps/frontend/src/styles/index.css
+
+- **الوظيفة/الدور:** يشكل الأساس النمطي للتطبيق، ويحدد لوحات الألوان، الخطوط، والأنماط الخاصة بحالات الطباعة، إضافةً إلى تحضيرات Tailwind.  
+- **التفاصيل التقنية/البنيوية:** يحدد متغيرات CSS عديدة للألوان، الظلال، نصف القطر، ويعرّف طبقة `@layer base` لتطبيق الأنماط العامة، فضلًا عن قواعد خاصة بـ `.script-page` للطباعة.  
+- **الملاحظات/المخاطر/التحقق:** يجب الحفاظ على تزامن الأسماء مع ما هو معرّف في إعداد Tailwind (مثل `--sidebar-background` مقابل `--sidebar`)، إذ يوجد اختلاف (`sidebar.DEFAULT`) قد يتطلب مراجعة.
+
+### /home/user/doodleduel/apps/frontend/src/App.tsx
+
+- **الوظيفة/الدور:** يمثل جذر تطبيق React، يضبط مزودي السياق (QueryClient، Tooltip، Toaster) ويحدد نظام التوجيه باستخدام `wouter`.  
+- **التفاصيل التقنية/البنيوية:** ينشئ دالة `Router` تُعرّف مسارين (الجذر و404)، ويستدعي `requestForToken` و`onMessageListener` من Firebase داخل `useEffect` لإظهار الإشعارات عبر `toast`.  
+- **الملاحظات/المخاطر/التحقق:** يجب تضمين `toast` في مصفوفة التبعيات لـ `useEffect` لتجنب تحذيرات React، كما ينبغي التعامل مع إلغاء الاشتراك من `onMessageListener` عند إلغاء التركيب.
+
+### /home/user/doodleduel/apps/frontend/src/main.tsx
+
+- **الوظيفة/الدور:** نقطة تركيب React التي تنشئ الجذر باستخدام `createRoot` وتستورد الأنماط الأساسية قبل عرض التطبيق.  
+- **التفاصيل التقنية/البنيوية:** يستورد `App` و`./styles/index.css`، ويستدعي `createRoot(document.getElementById("root")!)` لتشغيل التطبيق داخل عنصر الجذر.  
+- **الملاحظات/المخاطر/التحقق:** يعتمد على وجود عنصر `root` في `index.html`، ويستخدم عامل التأكيد (`!`) الذي يفترض أن العنصر موجود دائمًا؛ يجب التأكد من عدم تغيير معرف العنصر.
+
+### /home/user/doodleduel/apps/frontend/index.html
+
+- **الوظيفة/الدور:** قالب HTML الأساسي لتطبيق الواجهة يستخدمه Vite لتجميع التطبيق وتشغيله أثناء التطوير.  
+- **التفاصيل التقنية/البنيوية:** يحدد لغة الصفحة بالعربية (`lang="ar" dir="rtl"`)، يستورد خطوط Google (Amiri وCourier Prime)، ويحمّل وحدة `src/main.tsx`.  
+- **الملاحظات/المخاطر/التحقق:** يفتقر لعناصر `<title>` وبيانات وصفية إضافية لتحسين محركات البحث، ويجب التحقق من أن إعدادات الأمان (Content Security Policy) تضاف أثناء النشر.
+
+### /home/user/doodleduel/configs
+
+- **الوظيفة/الدور:** يحتوي على ملفات التهيئة المشتركة (Tailwind، Vite، tsconfig الأساسي) المستخدمة عبر التطبيقات لضمان اتساق الإعدادات.  
+- **التفاصيل التقنية/البنيوية:** يضم ثلاثة ملفات TypeScript/JSON تنظم محتوى البناء ومسارات الاستيراد، وتستخدم في سكريبتات `package.json`.  
+- **الملاحظات/المخاطر/التحقق:** يجب التأكد من أن المسارات النسبية داخل هذه الملفات تتماشى مع الموقع الفعلي للمشروع في البيئة الحقيقية، خصوصًا عند تشغيل أدوات البناء خارج الحاوية الحالية.
+
+### /home/user/doodleduel/configs/tailwind.config.ts
+
+- **الوظيفة/الدور:** يحدد إعدادات Tailwind CSS العامة للمشروع بما في ذلك مصادر المحتوى ولوحة الألوان المخصصة والحركات.  
+- **التفاصيل التقنية/البنيوية:** يفعّل الوضع الليلي المعتمد على الصنف، يوسع حدود نصف القطر والألوان باستخدام متغيرات CSS، ويضيف إضافات مثل `tailwindcss-animate` و`@tailwindcss/typography`.  
+- **الملاحظات/المخاطر/التحقق:** القيمة `sidebar.DEFAULT` تشير إلى متغير `--sidebar-background` غير المعرف في CSS (المعرّف هو `--sidebar`)، ما قد يؤدي إلى ألوان غير صحيحة ويستلزم مراجعة الاسم.
+
+### /home/user/doodleduel/configs/tsconfig.base.json
+
+- **الوظيفة/الدور:** يوفر إعدادات TypeScript المشتركة بين الواجهة والخلفية والحزم المشتركة لضمان سلوك موحد للمترجم.  
+- **التفاصيل التقنية/البنيوية:** يحدد الهدف ES2020، يستخدم `moduleResolution: bundler`، يفعّل خيارات صارمة، ويعرّف مسارات علياس لـ `@frontend`, `@backend`, و`@shared`.  
+- **الملاحظات/المخاطر/التحقق:** يشير إلى `references` نحو `tsconfig.node.json` غير المدرج في المسارات المحددة، لذا يجب التأكد من وجوده في الجذر لتجنب تحذيرات أثناء بناء المشاريع الفرعية.
+
+### /home/user/doodleduel/configs/vite.config.ts
+
+- **الوظيفة/الدور:** يضبط Vite لتطوير وتجميع الواجهة الأمامية مع دعم مكونات React وإضافات Replit في بيئة غير الإنتاج.  
+- **التفاصيل التقنية/البنيوية:** يستخدم `defineConfig` مع مكوّن `react()` وإضافات شرطية من Replit، يحدد مسارات alias لـ`@` و`@shared`, ويضبط `publicDir`, `root`, و`build.outDir` لتتوافق مع هيكل الأحادي.  
+- **الملاحظات/المخاطر/التحقق:** يعتمد على `await import` داخل مصفوفة الإضافات ما يتطلب تشغيل الملف في بيئة تدعم top-level await (Node 20)، ويجب التحقق من إتاحة المتغيرات البيئية `REPL_ID` قبل النشر التقليدي.
+
+### /home/user/doodleduel/packages/shared
+
+- **الوظيفة/الدور:** يحتوي على الشيفرات المشتركة بين الواجهة والخلفية، ما يسمح بإعادة استخدام المخططات والوظائف الخاصة بالسيناريو والتعامل مع المحرر.  
+- **التفاصيل التقنية/البنيوية:** يضم مجلد `schema` لتعريف جداول Drizzle، مجلد `screenplay` لأدوات التحليل، ومجلد `utils` لمساعدات المحرر.  
+- **الملاحظات/المخاطر/التحقق:** بعض الملفات في هذا المجلد تعتمد على DOM وReact معًا رغم أنها مشتركة، ما قد يسبب مشاكل عند استخدامها في الخادم؛ يلزم تقسيم الكود أو حماية الاستدعاءات.
+
+### /home/user/doodleduel/packages/shared/schema
+
+- **الوظيفة/الدور:** يعرّف مخططات قاعدة البيانات والمخططات الإدخالية باستخدام Drizzle ORM وZod.  
+- **التفاصيل التقنية/البنيوية:** يحتوي على ملف `users.ts` الذي يصف جدول المستخدمين ويولّد مخططًا لإدخال المستخدم ويعرّف الأنواع TypeScript.  
+- **الملاحظات/المخاطر/التحقق:** يجب المحافظة على تطابق هذا المخطط مع أي مهاجرات يتم إنشاؤها عبر Drizzle، خاصة أن ملف التهيئة يشير إلى هذا المسار مباشرة.
+
+### /home/user/doodleduel/packages/shared/schema/users.ts
+
+- **الوظيفة/الدور:** يحدد جدول المستخدمين في قاعدة بيانات PostgreSQL بما في ذلك الأعمدة والقيود، ويوفر أنواع إدخال وانتقاء.  
+- **التفاصيل التقنية/البنيوية:** يستخدم `pgTable` مع حقل `id` يولّد UUID عبر `gen_random_uuid()`, ويجعل `username` فريدًا، ويستخرج مخطط الإدخال عبر `createInsertSchema` من Drizzle-Zod.  
+- **الملاحظات/المخاطر/التحقق:** ينبغي حماية كلمات المرور قبل التخزين لأن المخطط الحالي يسمح بحفظ نص عادي؛ يتعين دمج طبقة التشفير في التطبيق الخلفي.
+
+### /home/user/doodleduel/packages/shared/screenplay
+
+- **الوظيفة/الدور:** يوفر المنظومة الأساسية لمعالجة نصوص السيناريو وتحويلها إلى عناصر HTML منسقة مع دعم اللغة العربية.  
+- **التفاصيل التقنية/البنيوية:** يضم عوامل التحليل (`agents.ts`)، المنسق (`coordinator.ts`)، مدير الأنماط المخصصة، تعريف الأنماط، وأنماط Regex للتعرف على أجزاء السيناريو.  
+- **الملاحظات/المخاطر/التحقق:** تحتوي الملفات على إشارات إلى `document` و`localStorage` ما يجعلها تعمل فقط في بيئة متصفح، وبالتالي يجب الحذر عند استيرادها في الخلفية أو أثناء الاختبارات الخالية من DOM.
+
+### /home/user/doodleduel/packages/shared/screenplay/agents.ts
+
+- **الوظيفة/الدور:** يعرّف مجموعة من العوامل (Agents) لتحليل كل سطر في السيناريو وتحويله إلى عناصر HTML مناسبة بحسب نوعه (مشهد، حوار، انتقال...).  
+- **التفاصيل التقنية/البنيوية:** يحتوي على دوال مثل `isValidCharacterName`, `classifyAction`, و`compileHtml`، بالإضافة إلى عوامل مثل `BasmalaAgent` و`CharacterDialogueAgent` التي تستخدم DOM لإنشاء عناصر `div` وتطبيق أنماط من `getFormatStyles`.  
+- **الملاحظات/المخاطر/التحقق:** وجود استخدام مباشر لـ `document.createElement` يجعل الوحدة غير قابلة للتنفيذ في Node دون محاكاة DOM، كما أن بعض السطور تستخدم React types (`React.CSSProperties`) دون استيراد React مما سيسبب أخطاء TypeScript.
+
+### /home/user/doodleduel/packages/shared/screenplay/coordinator.ts
+
+- **الوظيفة/الدور:** يعمل كمدير لسير العمل بين العوامل، حيث يمرر كل سطر إلى سلسلة من عوامل التحليل ويعيد النتيجة الأولى المطابقة.  
+- **التفاصيل التقنية/البنيوية:** يهيئ قائمة من العوامل في البناء، ويعرض دوال `processLine` و`processScript` التي تحتفظ بسياق التحليل عبر كائن `AgentContext`.  
+- **الملاحظات/المخاطر/التحقق:** يعتمد على أن جميع العوامل متوافقة مع بيئة التنفيذ؛ يجب إضافة معالجة أخطاء عند وقوع استثناء داخل عامل حتى لا تتوقف عملية التحليل بالكامل.
+
+### /home/user/doodleduel/packages/shared/screenplay/customStylesManager.ts
+
+- **الوظيفة/الدور:** يدير الأنماط المخصصة للمحرر من خلال التخزين في `localStorage`، ما يسمح للمستخدم بتعريف أنماط جديدة وإعادة استخدامها.  
+- **التفاصيل التقنية/البنيوية:** يعرّف الصنف `CustomStylesManager` مع وظائف لإضافة الأنماط، استرجاعها، حذفها، وتطبيقها على عناصر DOM، ويستخدم واجهة `CustomStyle` لتعريف الخصائص الممكنة.  
+- **الملاحظات/المخاطر/التحقق:** الاعتماد على `localStorage` يعني أن الأنماط لن تُزامن بين الأجهزة أو المستخدمين، كما يجب التعامل مع استثناءات JSON عند تعطل التخزين المحلي.
+
+### /home/user/doodleduel/packages/shared/screenplay/formatStyles.ts
+
+- **الوظيفة/الدور:** يوفر دالة `getFormatStyles` التي تعيد خصائص CSS لكل نوع من عناصر السيناريو مع دعم اختيار الخط والحجم.  
+- **التفاصيل التقنية/البنيوية:** يبني كائن `baseStyles` ويوسع خصائص محددة لكل تنسيق (مثل `character`, `dialogue`, `transition`)، ويعيد أنماطًا خاصة للعناصر المجمعة مثل `scene-header-top-line`.  
+- **الملاحظات/المخاطر/التحقق:** يفرض عرضًا ثابتًا بوحدة البوصة لعناصر الحوار، ما قد لا يتكيف مع الشاشات الصغيرة؛ يجب التفكير في جلب قيم مرنة أو استخدام وحدات نسبي.
+
+### /home/user/doodleduel/packages/shared/screenplay/patterns.ts
+
+- **الوظيفة/الدور:** يعرف مجموعة Regexات لاكتشاف عناصر السيناريو باللغة العربية (مثل البسملة، أسماء الشخصيات، الانتقالات) لدعم العوامل التحليلية.  
+- **التفاصيل التقنية/البنيوية:** يعرّف دالة `c` المساعدة لإنشاء Regexات، ثم يعيد كائنًا يحتوي على أنماط عديدة مثل `sceneKeywords`, `actionKeywords`, و`characterNames` مع دعم الرموز النقطية.  
+- **الملاحظات/المخاطر/التحقق:** يجب مراجعة الأداء عند معالجة نصوص طويلة لأن بعض الأنماط واسعة جدًا، كما أن بعض التعابير تستخدم نطاقات Unicode قد تحتاج ضبطًا لتغطية جميع الحروف العربية الحديثة.
+
+### /home/user/doodleduel/packages/shared/screenplay/types.ts
+
+- **الوظيفة/الدور:** يحدد الواجهات والأنواع المستخدمة بين العوامل والمنسق، بما في ذلك `AgentContext`, `AgentResult`, و`FormattingAgent`.  
+- **التفاصيل التقنية/البنيوية:** يعيد كائن `ActionType` لتصنيف الأفعال، ويصف بنية نتيجة التحليل بما يتضمن نوع العنصر، الثقة، والسياق.  
+- **الملاحظات/المخاطر/التحقق:** يجب التأكد من أن جميع العوامل ترجع كائنات مطابقة لهذه الأنواع، وإلا سيفشل TypeScript، كما أن الكائن `ActionType` ثابت بلا أنواع literal ما يجعل المضاهاة تعتمد على السلاسل فقط.
+
+### /home/user/doodleduel/packages/shared/utils
+
+- **الوظيفة/الدور:** يجمع الأدوات المساعدة المشتركة المتعلقة بالمحرر، مثل التعامل مع التحديد وتطبيق التنسيقات.  
+- **التفاصيل التقنية/البنيوية:** يحتوي على ملف `editor-commands.ts` الذي يعرّف عدة وظائف للعمل مع DOM Selection وRange، بما في ذلك التقاط التنسيق وتطبيقه.  
+- **الملاحظات/المخاطر/التحقق:** يجب استخدام هذه الأدوات داخل مكونات تعمل في المتصفح فقط، لأن الاعتماد على `window` و`document` سيكسر الاختبارات في بيئات Node دون محاكاة.
+
+### /home/user/doodleduel/packages/shared/utils/editor-commands.ts
+
+- **الوظيفة/الدور:** يقدم مجموعة شاملة من أوامر التلاعب بالمحرر مثل التركيز على العنصر، تطبيق أنماط داخلية، العثور على النص واستبداله، وإدارة التحديد الحالي.  
+- **التفاصيل التقنية/البنيوية:** يعرف دوالًا مثل `applyInlineStyles`, `getCurrentBlockElement`, `findNext`, `replaceRangeWithText`, و`highlightSimilarFormatting` مع أنواع TypeScript لإرجاع النطاقات والنتائج.  
+- **الملاحظات/المخاطر/التحقق:** كثرة التعامل مع DOM المباشر تتطلب ضمان أن هذه الوظائف تُستدعى بعد ضمان وجود المحرر، كما يجب تنظيف الأصناف المضافة (مثل `format-match`) لتجنب تراكمها عند الاستخدام المتكرر.
+
+### /home/user/doodleduel/.firebaserc
+
+- **الوظيفة/الدور:** يحدد مشروع Firebase الافتراضي (`resonant-sunset-468522-q4`) المستخدم عند تشغيل أو نشر وظائف واستضافة Firebase.  
+- **التفاصيل التقنية/البنيوية:** ملف JSON بسيط يحتوي على كائن `projects` مع مفتاح `default` للإشارة إلى معرف المشروع.  
+- **الملاحظات/المخاطر/التحقق:** يجب تحديث هذا الملف عند العمل على مشروع Firebase مختلف لتجنب النشر على بيئة خاطئة، ويفضل تعيين معرفات عبر متغيرات بيئية عند مشاركة المستودع.
+
+### /home/user/doodleduel/.gitignore
+
+- **الوظيفة/الدور:** يحدد الملفات والمجلدات التي يجب تجاهلها من Git مثل `node_modules` و`dist` ومخرجات الأنماط المولدة.  
+- **التفاصيل التقنية/البنيوية:** يحتوي على ثلاث أسطر فقط، ما يعني أن بعض المجلدات (مثل `dist/public` أو `migrations`) قد تحتاج إضافتها يدويًا إن لزم.  
+- **الملاحظات/المخاطر/التحقق:** يجب مراجعة الملف لضمان تجاهل مخلفات البناء الأخرى (مثل `.env`) لتفادي تسريب أسرار أو ملفات كبيرة للمستودع.
+
+### /home/user/doodleduel/components.json
+
+- **الوظيفة/الدور:** ملف تهيئة لمولد مكونات shadcn/ui يحدد النمط (`new-york`)، مسارات Tailwind، والاختصارات للأسماء المستعارة.  
+- **التفاصيل التقنية/البنيوية:** يحدد مسارات مثل `components`, `utils`, `ui`, `lib`, و`hooks` ضمن مجلد الواجهة الأمامية، مما يسمح للأداة بإضافة المكونات في المكان الصحيح.  
+- **الملاحظات/المخاطر/التحقق:** يجب إبقاء هذا الملف متزامنًا مع هيكل المشروع؛ أي تغيير في المسارات يتطلب تحديث الإعدادات قبل إنشاء مكونات جديدة.
+
+### /home/user/doodleduel/drizzle.config.ts
+
+- **الوظيفة/الدور:** يهيئ أداة Drizzle Kit لتوليد المهاجرات والتعامل مع المخططات اعتمادًا على قاعدة بيانات PostgreSQL.  
+- **التفاصيل التقنية/البنيوية:** يتحقق من وجود المتغير البيئي `DATABASE_URL` وإلا يرمي خطأ، ثم يعرّف المسارات (`out`, `schema`) ونوع اللهجة `postgresql` مع بيانات الاتصال.  
+- **الملاحظات/المخاطر/التحقق:** يجب ضبط المتغير البيئي قبل تشغيل أي أوامر Drizzle، كما أن إخراج المهاجرات في `./migrations` يتطلب إضافة المجلد إلى .gitignore إذا كان يحوي ملفات كبيرة.
+
+### /home/user/doodleduel/firebase.json
+
+- **الوظيفة/الدور:** يحدد إعدادات استضافة ووظائف Firebase للنشر التكاملي بين الواجهة الأمامية والخلفية.  
+- **التفاصيل التقنية/البنيوية:** يوجه الاستضافة لخدمة `dist/public`, يضبط عمليات إعادة الكتابة لتوجيه `/api/**` إلى الدالة `api`، ويحدد أن الوظائف تستخدم `nodejs20` وتنفذ `npm run build` قبل النشر.  
+- **الملاحظات/المخاطر/التحقق:** يجب التأكد من أن `npm run build` يبني كلًا من الواجهة والخلفية بنجاح وإلا سيفشل النشر، كما ينبغي إضافة قواعد أمان إضافية مثل رؤوس HTTP حسب الحاجة.
+
+### /home/user/doodleduel/package-lock.json
+
+- **الوظيفة/الدور:** يثبّت إصدارات تبعيات npm للمشروع بأكمله، ما يضمن بناءً قابلًا للتكرار عبر بيئات مختلفة.  
+- **التفاصيل التقنية/البنيوية:** يحدد معلومات الحزمة الجذرية (`doodleduel-monorepo`)، يسرد dependencies وdevDependencies مع إصدارات محددة، ويستخدم `lockfileVersion` 3 المتوافق مع npm 9+.  
+- **الملاحظات/المخاطر/التحقق:** يجب عدم تحريره يدويًا؛ أي تحديث للتبعيات يجب أن يتم عبر npm للحفاظ على سلامة التجزئات، كما أن حجمه الكبير يستدعي مراقبته في نظام التحكم بالإصدارات.
+
+### /home/user/doodleduel/package.json
+
+- **الوظيفة/الدور:** يضبط إعدادات npm الأساسية، السكريبتات، وقائمة التبعيات المشتركة للمستودع الأحادي.  
+- **التفاصيل التقنية/البنيوية:** يعرّف سكريبتات مثل `dev`, `build`, `build:frontend`, `build:backend`, ويستخدم workspaces لـ `apps/*` و`packages/*`, إضافة إلى قائمة طويلة من التبعيات المرتبطة بالواجهة والخلفية.  
+- **الملاحظات/المخاطر/التحقق:** بعض السكريبتات (مثل `build:backend`) تعتمد على esbuild بصيغة ESM؛ يجب التأكد من أن Node 20 متاح في بيئة CI، كما ينبغي إضافة أوامر اختبار وlint لضمان الجودة.
+
+### /home/user/doodleduel/postcss.config.js
+
+- **الوظيفة/الدور:** يحدد إعدادات PostCSS التي يستخدمها Vite أثناء بناء الواجهة الأمامية لمعالجة Tailwind وAutoprefixer.  
+- **التفاصيل التقنية/البنيوية:** ملف صغير يفعّل مكوني `tailwindcss` و`autoprefixer` دون خيارات إضافية، ما يعني الاعتماد على الإعدادات الافتراضية.  
+- **الملاحظات/المخاطر/التحقق:** يمكن إضافة مكونات أخرى (مثل cssnano) للتصغير في الإنتاج، كما يجب التأكد من أن المسار يشير إلى نفس ملف Tailwind المستخدم في `components.json`.
+
+### /home/user/doodleduel/tsconfig.json
+
+- **الوظيفة/الدور:** يمد إعداد TypeScript الجذري، موسعًا من `configs/tsconfig.base.json` مع تحديد `baseUrl` ومسارات الأسماء المستعارة.  
+- **التفاصيل التقنية/البنيوية:** يعيد تعريف المسارات لـ `@frontend`, `@backend`, `@shared` لتوجيه الاستيرادات إلى المجلدات الصحيحة ضمن المستودع الأحادي.  
+- **الملاحظات/المخاطر/التحقق:** يجب إبقاء هذا الملف متوافقًا مع أي تغييرات في هيكل المجلدات؛ أي اختلاف سيؤدي إلى فشل محلل TypeScript أثناء التطوير أو البناء.
+
+## قائمة تحقق التغطية
+
+- ✓ /home/user/doodleduel/apps
+- ✓ /home/user/doodleduel/apps/backend
+- ✓ /home/user/doodleduel/apps/backend/src
+- ✓ /home/user/doodleduel/apps/backend/src/index.ts
+- ✓ /home/user/doodleduel/apps/backend/src/notifications.ts
+- ✓ /home/user/doodleduel/apps/backend/src/remoteConfig.ts
+- ✓ /home/user/doodleduel/apps/backend/src/routes.ts
+- ✓ /home/user/doodleduel/apps/backend/src/storage.ts
+- ✓ /home/user/doodleduel/apps/backend/src/vite.ts
+- ✓ /home/user/doodleduel/apps/frontend
+- ✓ /home/user/doodleduel/apps/frontend/public
+- ✓ /home/user/doodleduel/apps/frontend/public/firebase-messaging-sw.js
+- ✓ /home/user/doodleduel/apps/frontend/src
+- ✓ /home/user/doodleduel/apps/frontend/src/features
+- ✓ /home/user/doodleduel/apps/frontend/src/features/screenplay
+- ✓ /home/user/doodleduel/apps/frontend/src/features/screenplay/components
+- ✓ /home/user/doodleduel/apps/frontend/src/features/screenplay/components/ClipboardToolbar.tsx
+- ✓ /home/user/doodleduel/apps/frontend/src/features/screenplay/components/EditingToolbar.tsx
+- ✓ /home/user/doodleduel/apps/frontend/src/features/screenplay/components/FindReplaceDialog.tsx
+- ✓ /home/user/doodleduel/apps/frontend/src/features/screenplay/components/FontToolbar.tsx
+- ✓ /home/user/doodleduel/apps/frontend/src/features/screenplay/components/ParagraphToolbar.tsx
+- ✓ /home/user/doodleduel/apps/frontend/src/features/screenplay/components/ScreenplayEditor.tsx
+- ✓ /home/user/doodleduel/apps/frontend/src/features/screenplay/components/StylesDialog.tsx
+- ✓ /home/user/doodleduel/apps/frontend/src/features/screenplay/components/StylesToolbar.tsx
+- ✓ /home/user/doodleduel/apps/frontend/src/features/screenplay/pages
+- ✓ /home/user/doodleduel/apps/frontend/src/features/screenplay/pages/screenplay-processor.tsx
+- ✓ /home/user/doodleduel/apps/frontend/src/features/screenplay/utils
+- ✓ /home/user/doodleduel/apps/frontend/src/hooks
+- ✓ /home/user/doodleduel/apps/frontend/src/hooks/use-mobile.tsx
+- ✓ /home/user/doodleduel/apps/frontend/src/hooks/use-toast.ts
+- ✓ /home/user/doodleduel/apps/frontend/src/lib
+- ✓ /home/user/doodleduel/apps/frontend/src/lib/firebase.ts
+- ✓ /home/user/doodleduel/apps/frontend/src/lib/queryClient.ts
+- ✓ /home/user/doodleduel/apps/frontend/src/lib/utils.ts
+- ✓ /home/user/doodleduel/apps/frontend/src/pages
+- ✓ /home/user/doodleduel/apps/frontend/src/pages/not-found.tsx
+- ✓ /home/user/doodleduel/apps/frontend/src/shared
+- ✓ /home/user/doodleduel/apps/frontend/src/styles
+- ✓ /home/user/doodleduel/apps/frontend/src/styles/index.css
+- ✓ /home/user/doodleduel/apps/frontend/src/App.tsx
+- ✓ /home/user/doodleduel/apps/frontend/src/main.tsx
+- ✓ /home/user/doodleduel/apps/frontend/index.html
+- ✓ /home/user/doodleduel/configs
+- ✓ /home/user/doodleduel/configs/tailwind.config.ts
+- ✓ /home/user/doodleduel/configs/tsconfig.base.json
+- ✓ /home/user/doodleduel/configs/vite.config.ts
+- ✓ /home/user/doodleduel/packages/shared
+- ✓ /home/user/doodleduel/packages/shared/schema
+- ✓ /home/user/doodleduel/packages/shared/schema/users.ts
+- ✓ /home/user/doodleduel/packages/shared/screenplay
+- ✓ /home/user/doodleduel/packages/shared/screenplay/agents.ts
+- ✓ /home/user/doodleduel/packages/shared/screenplay/coordinator.ts
+- ✓ /home/user/doodleduel/packages/shared/screenplay/customStylesManager.ts
+- ✓ /home/user/doodleduel/packages/shared/screenplay/formatStyles.ts
+- ✓ /home/user/doodleduel/packages/shared/screenplay/patterns.ts
+- ✓ /home/user/doodleduel/packages/shared/screenplay/types.ts
+- ✓ /home/user/doodleduel/packages/shared/utils
+- ✓ /home/user/doodleduel/packages/shared/utils/editor-commands.ts
+- ✓ /home/user/doodleduel/.firebaserc
+- ✓ /home/user/doodleduel/.gitignore
+- ✓ /home/user/doodleduel/components.json
+- ✓ /home/user/doodleduel/drizzle.config.ts
+- ✓ /home/user/doodleduel/firebase.json
+- ✓ /home/user/doodleduel/package-lock.json
+- ✓ /home/user/doodleduel/package.json
+- ✓ /home/user/doodleduel/postcss.config.js
+- ✓ /home/user/doodleduel/tsconfig.json
